

# 들어가기 앞서
실행 컨텍스트는 자바스크립트의 동작원리를 담고 있는 핵심 개념이다
실행 컨텍스트를 바르게 이해해야, 스코트를 기반으로 바이딩을 관리하는 방법과, 호이스팅이 발생하는 이유, 클로저의 동작 방식, 이벤트 핸들러와 비동기 처리 방식을 이해할 수 있다


# 23.1 소스코드의 타입
ECMAScript에서는 소스코드를 4가지 타입으로 구분한다
*4가지 타입의 소스코드는 실행 컨텍스트를 생성한다*

| 전역코드   | 전역에 존재하는 소스코드를 말한다. 전역에 정의된 함수, 클래스 등의 내부 코드는 포함하지 않는다       |
| ------ | ------------------------------------------------------------ |
| 함수 코드  | 함수 내부에 존재하는 소스코드를 말한다. 함수 내부에 중첩된 함수, 클래스 등의 내부 코드는 포함되지 않는다 |
| eval코드 | 빌트인 전역함수인 eval 함수에 인수로 전달되는 소스코드 그 자체를 말한다                   |
| 모듈 코드  | 모듈 내부에 존재하는 소스코드를 말한다. 모듈 내부의 함수, 클래스 등의 내부 코드는 포함되지 않는다     |
이 4가지는, 실행 컨텍스트를 생성하는 과정과 관리 내용의 종류에 따라 4가지로 분류된것이다


![](https://i.imgur.com/69fXczk.png)

1. **전역 코드 (Global Code)**:
   - 전역 코드란 전역 범위에서 실행되는 코드를 의미한다
   - 이 코드는 전역 실행 컨텍스트에서 평가됩니다.
   - 전역 실행 컨텍스트는 JavaScript 실행의 가장 상위 레벨의 컨텍스트로, 전역 객체와 관련된 변수를 관리한다

2. **함수 코드 (Function Code)**:
   - 함수 코드란 함수 내부에서 실행되는 코드를 의미한다
   - 이 코드는 함수 실행 컨텍스트에서 평가된다
   - 함수 실행 컨텍스트는 해당 함수의 변수, 매개변수, 그리고 이 함수 내에서 사용되는 this 값을 관리한다

3. **eval 코드 (eval Code)**:
   - eval 코드는 JavaScript의 `eval()` 함수를 통해 실행되는 코드를 의미한다
   - 이 코드는 eval 실행 컨텍스트에서 평가된다
   - eval코드는 strict 모드에서 자신만의 ==독자적인 스코프를 생성==한다
   - eval 실행 컨텍스트는 eval 함수 내부에서만 사용되며, 함수가 호출된 컨텍스트에서의 변수를 직접 수정할 수 있다

4. **모듈 코드 (Module Code)**:
   - 모듈 코드는 ES6에서 도입된 모듈 시스템을 통해 작성된 코드를 의미한다
   - 이 코드는 모듈 실행 컨텍스트에서 평가된다
   - 모듈 실행 컨텍스트는 각 모듈이 독립적으로 관리되며, 각 모듈은 자신의 범위와 변수를 가진다


## 23.2 소스코드의 평가와 실행
앞서 4가지 종류의 코드를 보았는데, 코드가 *평가* 되고 *실행*되었다

그럼 평가와 실행 된다는게 정확히 무엇을 말하는 걸까?
한문장으로 정리하고 넘어가자면, 평가는 코드를 실행하기 전에 어떤 변수와 어떤 함수가 있는지 미리 알아두는 단계이고, 실행은 평가가 끝난 뒤에 실제로 코드가 한줄 한줄 동작하는 과정을 의미한다

### 평가

![](https://i.imgur.com/nR3cIda.png)
소스코드 평과 과정에서는 실행 컨텍스트를 생성하고 선언문만 먼저 실행하여 생성된 변수를 스코프에 등록한다.

예시를 통해 이해하자
```js
var x;
x=1;
```

1. 평가를 통해 실행 컨텍스트가 관리하는 스코프에 등록되고 undefined로 초기화 된다

![](https://i.imgur.com/IibYYWq.png)


2. 코드를 한줄 한줄 실행한다.
이때, `var x`는 이미 코드 평가 과정에서 실행 된것이기 때문에,
x=1만 실행된다.

## 23.3 실행 컨텍스트의 역할
코드를 실행하려면 스코프, 식별자, 코드 실행 순서 등 여러 과정을 거친다
이 모든 것을 관리하는 것이 *실행 컨텍스트*이다
실행 컨텍스트는 소스코드를 실행하는데 필요한 환경을 제공하고 실제 코드의 결과를 관리한다

## 23.4 실행 컨텍스트 스택

![](https://i.imgur.com/YPECZNX.png)

코드를 읽으며 생성되는 실행 컨텍스트는 *스택* 자료구조 형태로 저장된다.
이를  ==실행 컨텍스트 스택== 이라고 부른다
시간의 흐름에 따라 